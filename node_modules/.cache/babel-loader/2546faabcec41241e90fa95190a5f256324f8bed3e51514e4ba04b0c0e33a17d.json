{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/utils/misc/alexnicita.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _objectSpread from\"/Users/utils/misc/alexnicita.github.io/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";var _templateObject;import React,{useRef,memo}from'react';import useWindowSize from'react-use/lib/useWindowSize';import styled from'styled-components';import{useElementResize}from'hooks';import HeaderButtons from'./HeaderButtons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Windows(_ref){var apps=_ref.apps,onMouseDown=_ref.onMouseDown,onClose=_ref.onClose,onMinimize=_ref.onMinimize,onMaximize=_ref.onMaximize,focusedAppId=_ref.focusedAppId;return/*#__PURE__*/_jsx(\"div\",{style:{position:'relative',zIndex:0},children:apps.map(function(app){return/*#__PURE__*/_jsx(StyledWindow,_objectSpread({show:!app.minimized,id:app.id,onMouseDown:onMouseDown,onMouseUpClose:onClose,onMouseUpMinimize:onMinimize,onMouseUpMaximize:onMaximize,isFocus:focusedAppId===app.id// for styledWindow\n},app),app.id);})});}var Window=/*#__PURE__*/memo(function(_ref2){var injectProps=_ref2.injectProps,id=_ref2.id,onMouseDown=_ref2.onMouseDown,onMouseUpClose=_ref2.onMouseUpClose,onMouseUpMinimize=_ref2.onMouseUpMinimize,onMouseUpMaximize=_ref2.onMouseUpMaximize,header=_ref2.header,defaultSize=_ref2.defaultSize,defaultOffset=_ref2.defaultOffset,resizable=_ref2.resizable,maximized=_ref2.maximized,component=_ref2.component,zIndex=_ref2.zIndex,isFocus=_ref2.isFocus,className=_ref2.className;function _onMouseDown(){onMouseDown(id);}function _onMouseUpClose(){onMouseUpClose(id);}function _onMouseUpMinimize(){onMouseUpMinimize(id);}function _onMouseUpMaximize(){if(resizable)onMouseUpMaximize(id);}function onDoubleClickHeader(e){if(e.target!==dragRef.current)return;_onMouseUpMaximize();}var dragRef=useRef(null);var ref=useRef(null);var _useWindowSize=useWindowSize(),windowWidth=_useWindowSize.width,windowHeight=_useWindowSize.height;var _useElementResize=useElementResize(ref,{dragRef:dragRef,defaultOffset:defaultOffset,defaultSize:defaultSize,boundary:{top:1,right:windowWidth-1,bottom:windowHeight-31,left:1},resizable:resizable,resizeThreshold:10}),offset=_useElementResize.offset,size=_useElementResize.size;var width,height,x,y;if(maximized){width=windowWidth+6;height=windowHeight-24;x=-3;y=-3;}else{width=size.width;height=size.height;x=offset.x;y=offset.y;}return/*#__PURE__*/_jsxs(\"div\",{className:className,ref:ref,onMouseDown:_onMouseDown,style:{transform:\"translate(\".concat(x,\"px,\").concat(y,\"px)\"),width:width?\"\".concat(width,\"px\"):'auto',height:height?\"\".concat(height,\"px\"):'auto',zIndex:zIndex},children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__bg\"}),/*#__PURE__*/_jsxs(\"header\",{className:\"app__header\",ref:dragRef,onDoubleClick:onDoubleClickHeader,children:[/*#__PURE__*/_jsx(\"img\",{onDoubleClick:_onMouseUpClose,src:header.icon,alt:header.title,className:\"app__header__icon\",draggable:false}),/*#__PURE__*/_jsx(\"div\",{className:\"app__header__title\",children:header.title}),/*#__PURE__*/_jsx(HeaderButtons,{buttons:header.buttons,onMaximize:_onMouseUpMaximize,onMinimize:_onMouseUpMinimize,onClose:_onMouseUpClose,maximized:maximized,resizable:resizable,isFocus:isFocus})]}),/*#__PURE__*/_jsx(\"div\",{className:\"app__content\",children:component(_objectSpread({onClose:_onMouseUpClose,onMinimize:_onMouseUpMinimize,isFocus:isFocus},injectProps))})]});});var StyledWindow=styled(Window)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: \",\";\\n  position: absolute;\\n  padding: 3px;\\n  padding: \",\"px;\\n  background-color: \",\";\\n  flex-direction: column;\\n  border-top-left-radius: 8px;\\n  border-top-right-radius: 8px;\\n  .header__bg {\\n    background: \",\";\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    right: 0;\\n    height: 28px;\\n    pointer-events: none;\\n    border-top-left-radius: 8px;\\n    border-top-right-radius: 8px;\\n    overflow: hidden;\\n  }\\n  .header__bg:before {\\n    content: '';\\n    display: block;\\n    position: absolute;\\n    left: 0;\\n    opacity: \",\";\\n    background: linear-gradient(to right, #1638e6 0%, transparent 100%);\\n    top: 0;\\n    bottom: 0;\\n    width: 15px;\\n  }\\n  .header__bg:after {\\n    content: '';\\n    opacity: \",\";\\n    display: block;\\n    position: absolute;\\n    right: 0;\\n    background: linear-gradient(to left, #1638e6 0%, transparent 100%);\\n    top: 0;\\n    bottom: 0;\\n    width: 15px;\\n  }\\n  .app__header {\\n    display: \",\";\\n    height: 25px;\\n    line-height: 25px;\\n    font-weight: 700;\\n    font-size: 12px;\\n    font-family: 'Noto Sans';\\n    text-shadow: 1px 1px #000;\\n    color: white;\\n    position: absolute;\\n    left: 3px;\\n    right: 3px;\\n    align-items: center;\\n  }\\n  .app__header__icon {\\n    width: 15px;\\n    height: 15px;\\n    margin-left: 1px;\\n    margin-right: 3px;\\n  }\\n  .app__header__title {\\n    flex: 1;\\n    pointer-events: none;\\n    padding-right: 5px;\\n    letter-spacing: 0.5px;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n  }\\n  .app__content {\\n    flex: 1;\\n    position: relative;\\n    margin-top: 25px;\\n    height: calc(100% - 25px);\\n  }\\n\"])),function(_ref3){var show=_ref3.show;return show?'flex':'none';},function(_ref4){var header=_ref4.header;return header.invisible?0:3;},function(_ref5){var isFocus=_ref5.isFocus;return isFocus?'#0831d9':'#6582f5';},function(_ref6){var isFocus=_ref6.isFocus;return isFocus?'linear-gradient(to bottom,#0058ee 0%,#3593ff 4%,#288eff 6%,#127dff 8%,#036ffc 10%,#0262ee 14%,#0057e5 20%,#0054e3 24%,#0055eb 56%,#005bf5 66%,#026afe 76%,#0062ef 86%,#0052d6 92%,#0040ab 94%,#003092 100%)':'linear-gradient(to bottom, #7697e7 0%,#7e9ee3 3%,#94afe8 6%,#97b4e9 8%,#82a5e4 14%,#7c9fe2 17%,#7996de 25%,#7b99e1 56%,#82a9e9 81%,#80a5e7 89%,#7b96e1 94%,#7a93df 97%,#abbae3 100%)';},function(_ref7){var isFocus=_ref7.isFocus;return isFocus?1:0.3;},function(_ref8){var isFocus=_ref8.isFocus;return isFocus?1:0.4;},function(_ref9){var header=_ref9.header;return header.invisible?'none':'flex';});export default Windows;","map":{"version":3,"names":["React","useRef","memo","useWindowSize","styled","useElementResize","HeaderButtons","Windows","apps","onMouseDown","onClose","onMinimize","onMaximize","focusedAppId","position","zIndex","map","app","minimized","id","Window","injectProps","onMouseUpClose","onMouseUpMinimize","onMouseUpMaximize","header","defaultSize","defaultOffset","resizable","maximized","component","isFocus","className","_onMouseDown","_onMouseUpClose","_onMouseUpMinimize","_onMouseUpMaximize","onDoubleClickHeader","e","target","dragRef","current","ref","windowWidth","width","windowHeight","height","boundary","top","right","bottom","left","resizeThreshold","offset","size","x","y","transform","icon","title","buttons","StyledWindow","show","invisible"],"sources":["/Users/utils/misc/alexnicita.github.io/src/WinXP/Windows/index.js"],"sourcesContent":["import React, { useRef, memo } from 'react';\nimport useWindowSize from 'react-use/lib/useWindowSize';\nimport styled from 'styled-components';\n\nimport { useElementResize } from 'hooks';\nimport HeaderButtons from './HeaderButtons';\n\nfunction Windows({\n  apps,\n  onMouseDown,\n  onClose,\n  onMinimize,\n  onMaximize,\n  focusedAppId,\n}) {\n  return (\n    <div style={{ position: 'relative', zIndex: 0 }}>\n      {apps.map(app => (\n        <StyledWindow\n          show={!app.minimized}\n          key={app.id}\n          id={app.id}\n          onMouseDown={onMouseDown}\n          onMouseUpClose={onClose}\n          onMouseUpMinimize={onMinimize}\n          onMouseUpMaximize={onMaximize}\n          isFocus={focusedAppId === app.id} // for styledWindow\n          {...app}\n        />\n      ))}\n    </div>\n  );\n}\n\nconst Window = memo(function({\n  injectProps,\n  id,\n  onMouseDown,\n  onMouseUpClose,\n  onMouseUpMinimize,\n  onMouseUpMaximize,\n  header,\n  defaultSize,\n  defaultOffset,\n  resizable,\n  maximized,\n  component,\n  zIndex,\n  isFocus,\n  className,\n}) {\n  function _onMouseDown() {\n    onMouseDown(id);\n  }\n  function _onMouseUpClose() {\n    onMouseUpClose(id);\n  }\n  function _onMouseUpMinimize() {\n    onMouseUpMinimize(id);\n  }\n  function _onMouseUpMaximize() {\n    if (resizable) onMouseUpMaximize(id);\n  }\n  function onDoubleClickHeader(e) {\n    if (e.target !== dragRef.current) return;\n    _onMouseUpMaximize();\n  }\n  const dragRef = useRef(null);\n  const ref = useRef(null);\n  const { width: windowWidth, height: windowHeight } = useWindowSize();\n  const { offset, size } = useElementResize(ref, {\n    dragRef,\n    defaultOffset,\n    defaultSize,\n    boundary: {\n      top: 1,\n      right: windowWidth - 1,\n      bottom: windowHeight - 31,\n      left: 1,\n    },\n    resizable,\n    resizeThreshold: 10,\n  });\n  let width, height, x, y;\n  if (maximized) {\n    width = windowWidth + 6;\n    height = windowHeight - 24;\n    x = -3;\n    y = -3;\n  } else {\n    width = size.width;\n    height = size.height;\n    x = offset.x;\n    y = offset.y;\n  }\n  return (\n    <div\n      className={className}\n      ref={ref}\n      onMouseDown={_onMouseDown}\n      style={{\n        transform: `translate(${x}px,${y}px)`,\n        width: width ? `${width}px` : 'auto',\n        height: height ? `${height}px` : 'auto',\n        zIndex,\n      }}\n    >\n      <div className=\"header__bg\" />\n      <header\n        className=\"app__header\"\n        ref={dragRef}\n        onDoubleClick={onDoubleClickHeader}\n      >\n        <img\n          onDoubleClick={_onMouseUpClose}\n          src={header.icon}\n          alt={header.title}\n          className=\"app__header__icon\"\n          draggable={false}\n        />\n        <div className=\"app__header__title\">{header.title}</div>\n        <HeaderButtons\n          buttons={header.buttons}\n          onMaximize={_onMouseUpMaximize}\n          onMinimize={_onMouseUpMinimize}\n          onClose={_onMouseUpClose}\n          maximized={maximized}\n          resizable={resizable}\n          isFocus={isFocus}\n        />\n      </header>\n      <div className=\"app__content\">\n        {component({\n          onClose: _onMouseUpClose,\n          onMinimize: _onMouseUpMinimize,\n          isFocus,\n          ...injectProps,\n        })}\n      </div>\n    </div>\n  );\n});\n\nconst StyledWindow = styled(Window)`\n  display: ${({ show }) => (show ? 'flex' : 'none')};\n  position: absolute;\n  padding: 3px;\n  padding: ${({ header }) => (header.invisible ? 0 : 3)}px;\n  background-color: ${({ isFocus }) => (isFocus ? '#0831d9' : '#6582f5')};\n  flex-direction: column;\n  border-top-left-radius: 8px;\n  border-top-right-radius: 8px;\n  .header__bg {\n    background: ${({ isFocus }) =>\n      isFocus\n        ? 'linear-gradient(to bottom,#0058ee 0%,#3593ff 4%,#288eff 6%,#127dff 8%,#036ffc 10%,#0262ee 14%,#0057e5 20%,#0054e3 24%,#0055eb 56%,#005bf5 66%,#026afe 76%,#0062ef 86%,#0052d6 92%,#0040ab 94%,#003092 100%)'\n        : 'linear-gradient(to bottom, #7697e7 0%,#7e9ee3 3%,#94afe8 6%,#97b4e9 8%,#82a5e4 14%,#7c9fe2 17%,#7996de 25%,#7b99e1 56%,#82a9e9 81%,#80a5e7 89%,#7b96e1 94%,#7a93df 97%,#abbae3 100%)'};\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    height: 28px;\n    pointer-events: none;\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n    overflow: hidden;\n  }\n  .header__bg:before {\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    opacity: ${({ isFocus }) => (isFocus ? 1 : 0.3)};\n    background: linear-gradient(to right, #1638e6 0%, transparent 100%);\n    top: 0;\n    bottom: 0;\n    width: 15px;\n  }\n  .header__bg:after {\n    content: '';\n    opacity: ${({ isFocus }) => (isFocus ? 1 : 0.4)};\n    display: block;\n    position: absolute;\n    right: 0;\n    background: linear-gradient(to left, #1638e6 0%, transparent 100%);\n    top: 0;\n    bottom: 0;\n    width: 15px;\n  }\n  .app__header {\n    display: ${({ header }) => (header.invisible ? 'none' : 'flex')};\n    height: 25px;\n    line-height: 25px;\n    font-weight: 700;\n    font-size: 12px;\n    font-family: 'Noto Sans';\n    text-shadow: 1px 1px #000;\n    color: white;\n    position: absolute;\n    left: 3px;\n    right: 3px;\n    align-items: center;\n  }\n  .app__header__icon {\n    width: 15px;\n    height: 15px;\n    margin-left: 1px;\n    margin-right: 3px;\n  }\n  .app__header__title {\n    flex: 1;\n    pointer-events: none;\n    padding-right: 5px;\n    letter-spacing: 0.5px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n  .app__content {\n    flex: 1;\n    position: relative;\n    margin-top: 25px;\n    height: calc(100% - 25px);\n  }\n`;\n\nexport default Windows;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}