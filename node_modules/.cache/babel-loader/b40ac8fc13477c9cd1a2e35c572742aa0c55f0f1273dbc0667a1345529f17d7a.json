{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/utils/misc/alexnicita.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\nimport _objectSpread from \"/Users/utils/misc/alexnicita.github.io/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"/Users/utils/misc/alexnicita.github.io/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/utils/misc/alexnicita.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/utils/misc/alexnicita.github.io/src/WinXP/Icons/index.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _templateObject,\n  _templateObject2;\nimport React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Icons(_ref) {\n  _s();\n  var _this = this;\n  var icons = _ref.icons,\n    onMouseDown = _ref.onMouseDown,\n    onDoubleClick = _ref.onDoubleClick,\n    displayFocus = _ref.displayFocus,\n    mouse = _ref.mouse,\n    selecting = _ref.selecting,\n    setSelectedIcons = _ref.setSelectedIcons;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    iconsRect = _useState2[0],\n    setIconsRect = _useState2[1];\n  function measure(rect) {\n    if (iconsRect.find(function (r) {\n      return r.id === rect.id;\n    })) return;\n    setIconsRect(function (iconsRect) {\n      return [].concat(_toConsumableArray(iconsRect), [rect]);\n    });\n  }\n  useEffect(function () {\n    if (!selecting) return;\n    var sx = Math.min(selecting.x, mouse.docX);\n    var sy = Math.min(selecting.y, mouse.docY);\n    var sw = Math.abs(selecting.x - mouse.docX);\n    var sh = Math.abs(selecting.y - mouse.docY);\n    var selectedIds = iconsRect.filter(function (rect) {\n      var x = rect.x,\n        y = rect.y,\n        w = rect.w,\n        h = rect.h;\n      return x - sx < sw && sx - x < w && y - sy < sh && sy - y < h;\n    }).map(function (icon) {\n      return icon.id;\n    });\n    setSelectedIcons(selectedIds);\n  }, [iconsRect, setSelectedIcons, selecting, mouse.docX, mouse.docY]);\n  return /*#__PURE__*/_jsxDEV(IconsContainer, {\n    children: icons.map(function (icon) {\n      return /*#__PURE__*/_jsxDEV(StyledIcon, _objectSpread(_objectSpread({}, icon), {}, {\n        displayFocus: displayFocus,\n        onMouseDown: onMouseDown,\n        onDoubleClick: onDoubleClick,\n        measure: measure\n      }), icon.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, _this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n_s(Icons, \"wm5fVZAOayUM7wXo8XVjp2kSYU8=\");\n_c = Icons;\nfunction Icon(_ref2) {\n  _s2();\n  var title = _ref2.title,\n    onMouseDown = _ref2.onMouseDown,\n    onDoubleClick = _ref2.onDoubleClick,\n    icon = _ref2.icon,\n    className = _ref2.className,\n    id = _ref2.id,\n    component = _ref2.component,\n    measure = _ref2.measure;\n  var ref = useRef(null);\n  function _onMouseDown() {\n    onMouseDown(id);\n  }\n  function _onDoubleClick() {\n    onDoubleClick(component);\n  }\n  useEffect(function () {\n    var target = ref.current;\n    if (!target) return;\n    var _ref$current$getBound = ref.current.getBoundingClientRect(),\n      left = _ref$current$getBound.left,\n      top = _ref$current$getBound.top,\n      width = _ref$current$getBound.width,\n      height = _ref$current$getBound.height;\n    var posX = left + window.scrollX;\n    var posY = top + window.scrollY;\n    measure({\n      id: id,\n      x: posX,\n      y: posY,\n      w: width,\n      h: height\n    });\n  }, [id, measure]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: className,\n    onMouseDown: _onMouseDown,\n    onDoubleClick: _onDoubleClick,\n    ref: ref,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\".concat(className, \"__img__container\"),\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: icon,\n        alt: title,\n        className: \"\".concat(className, \"__img\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\".concat(className, \"__text__container\"),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\".concat(className, \"__text\"),\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s2(Icon, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c2 = Icon;\nvar IconsContainer = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  margin-top: 40px;\\n  margin-left: 40px;\\n\"])));\n_c3 = IconsContainer;\nvar StyledIcon = styled(Icon)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  width: 70px;\\n  margin-bottom: 30px;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  &__text__container {\\n    width: 100%;\\n    font-size: 10px;\\n    color: white;\\n    text-shadow: 0 1px 1px black;\\n    margin-top: 5px;\\n    display: flex;\\n    justify-content: center;\\n\\n    &:before {\\n      content: '';\\n      display: block;\\n      flex-grow: 1;\\n    }\\n    &:after {\\n      content: '';\\n      display: block;\\n      flex-grow: 1;\\n    }\\n  }\\n  &__text {\\n    padding: 0 3px 2px;\\n    background-color: \", \";\\n    text-align: center;\\n    flex-shrink: 1;\\n  }\\n  &__img__container {\\n    width: 30px;\\n    height: 30px;\\n    filter: \", \";\\n  }\\n  &__img {\\n    width: 30px;\\n    height: 30px;\\n    opacity: \", \";\\n  }\\n\"])), function (_ref3) {\n  var isFocus = _ref3.isFocus,\n    displayFocus = _ref3.displayFocus;\n  return isFocus && displayFocus ? '#0b61ff' : 'transparent';\n}, function (_ref4) {\n  var isFocus = _ref4.isFocus,\n    displayFocus = _ref4.displayFocus;\n  return isFocus && displayFocus ? 'drop-shadow(0 0 blue)' : '';\n}, function (_ref5) {\n  var isFocus = _ref5.isFocus,\n    displayFocus = _ref5.displayFocus;\n  return isFocus && displayFocus ? 0.5 : 1;\n});\n_c4 = StyledIcon;\nexport default Icons;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Icons\");\n$RefreshReg$(_c2, \"Icon\");\n$RefreshReg$(_c3, \"IconsContainer\");\n$RefreshReg$(_c4, \"StyledIcon\");","map":{"version":3,"names":["React","useState","useRef","useEffect","styled","Icons","icons","onMouseDown","onDoubleClick","displayFocus","mouse","selecting","setSelectedIcons","iconsRect","setIconsRect","measure","rect","find","r","id","sx","Math","min","x","docX","sy","y","docY","sw","abs","sh","selectedIds","filter","w","h","map","icon","Icon","title","className","component","ref","_onMouseDown","_onDoubleClick","target","current","getBoundingClientRect","left","top","width","height","posX","window","scrollX","posY","scrollY","IconsContainer","div","StyledIcon","isFocus"],"sources":["/Users/utils/misc/alexnicita.github.io/src/WinXP/Icons/index.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\n\nfunction Icons({\n  icons,\n  onMouseDown,\n  onDoubleClick,\n  displayFocus,\n  mouse,\n  selecting,\n  setSelectedIcons,\n}) {\n  const [iconsRect, setIconsRect] = useState([]);\n  function measure(rect) {\n    if (iconsRect.find(r => r.id === rect.id)) return;\n    setIconsRect(iconsRect => [...iconsRect, rect]);\n  }\n  useEffect(() => {\n    if (!selecting) return;\n    const sx = Math.min(selecting.x, mouse.docX);\n    const sy = Math.min(selecting.y, mouse.docY);\n    const sw = Math.abs(selecting.x - mouse.docX);\n    const sh = Math.abs(selecting.y - mouse.docY);\n    const selectedIds = iconsRect\n      .filter(rect => {\n        const { x, y, w, h } = rect;\n        return x - sx < sw && sx - x < w && y - sy < sh && sy - y < h;\n      })\n      .map(icon => icon.id);\n    setSelectedIcons(selectedIds);\n  }, [iconsRect, setSelectedIcons, selecting, mouse.docX, mouse.docY]);\n  return (\n    <IconsContainer>\n      {icons.map(icon => (\n        <StyledIcon\n          key={icon.id}\n          {...icon}\n          displayFocus={displayFocus}\n          onMouseDown={onMouseDown}\n          onDoubleClick={onDoubleClick}\n          measure={measure}\n        />\n      ))}\n    </IconsContainer>\n  );\n}\n\nfunction Icon({\n  title,\n  onMouseDown,\n  onDoubleClick,\n  icon,\n  className,\n  id,\n  component,\n  measure,\n}) {\n  const ref = useRef(null);\n  function _onMouseDown() {\n    onMouseDown(id);\n  }\n  function _onDoubleClick() {\n    onDoubleClick(component);\n  }\n  useEffect(() => {\n    const target = ref.current;\n    if (!target) return;\n    const { left, top, width, height } = ref.current.getBoundingClientRect();\n    const posX = left + window.scrollX;\n    const posY = top + window.scrollY;\n    measure({ id, x: posX, y: posY, w: width, h: height });\n  }, [id, measure]);\n  return (\n    <div\n      className={className}\n      onMouseDown={_onMouseDown}\n      onDoubleClick={_onDoubleClick}\n      ref={ref}\n    >\n      <div className={`${className}__img__container`}>\n        <img src={icon} alt={title} className={`${className}__img`} />\n      </div>\n      <div className={`${className}__text__container`}>\n        <div className={`${className}__text`}>{title}</div>\n      </div>\n    </div>\n  );\n}\n\nconst IconsContainer = styled.div`\n  position: absolute;\n  margin-top: 40px;\n  margin-left: 40px;\n`;\n\nconst StyledIcon = styled(Icon)`\n  width: 70px;\n  margin-bottom: 30px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  &__text__container {\n    width: 100%;\n    font-size: 10px;\n    color: white;\n    text-shadow: 0 1px 1px black;\n    margin-top: 5px;\n    display: flex;\n    justify-content: center;\n\n    &:before {\n      content: '';\n      display: block;\n      flex-grow: 1;\n    }\n    &:after {\n      content: '';\n      display: block;\n      flex-grow: 1;\n    }\n  }\n  &__text {\n    padding: 0 3px 2px;\n    background-color: ${({ isFocus, displayFocus }) =>\n      isFocus && displayFocus ? '#0b61ff' : 'transparent'};\n    text-align: center;\n    flex-shrink: 1;\n  }\n  &__img__container {\n    width: 30px;\n    height: 30px;\n    filter: ${({ isFocus, displayFocus }) =>\n      isFocus && displayFocus ? 'drop-shadow(0 0 blue)' : ''};\n  }\n  &__img {\n    width: 30px;\n    height: 30px;\n    opacity: ${({ isFocus, displayFocus }) =>\n      isFocus && displayFocus ? 0.5 : 1};\n  }\n`;\n\nexport default Icons;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}