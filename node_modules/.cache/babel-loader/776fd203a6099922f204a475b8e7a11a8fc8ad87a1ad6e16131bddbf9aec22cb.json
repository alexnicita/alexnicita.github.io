{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/utils/misc/alexnicita.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _objectSpread from\"/Users/utils/misc/alexnicita.github.io/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/utils/misc/alexnicita.github.io/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/utils/misc/alexnicita.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2;import React,{useState,useRef,useEffect}from'react';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Icons(_ref){var icons=_ref.icons,onMouseDown=_ref.onMouseDown,onDoubleClick=_ref.onDoubleClick,displayFocus=_ref.displayFocus,mouse=_ref.mouse,selecting=_ref.selecting,setSelectedIcons=_ref.setSelectedIcons;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),iconsRect=_useState2[0],setIconsRect=_useState2[1];function measure(rect){if(iconsRect.find(function(r){return r.id===rect.id;}))return;setIconsRect(function(iconsRect){return[].concat(_toConsumableArray(iconsRect),[rect]);});}useEffect(function(){if(!selecting)return;var sx=Math.min(selecting.x,mouse.docX);var sy=Math.min(selecting.y,mouse.docY);var sw=Math.abs(selecting.x-mouse.docX);var sh=Math.abs(selecting.y-mouse.docY);var selectedIds=iconsRect.filter(function(rect){var x=rect.x,y=rect.y,w=rect.w,h=rect.h;return x-sx<sw&&sx-x<w&&y-sy<sh&&sy-y<h;}).map(function(icon){return icon.id;});setSelectedIcons(selectedIds);},[iconsRect,setSelectedIcons,selecting,mouse.docX,mouse.docY]);return/*#__PURE__*/_jsx(IconsContainer,{children:icons.map(function(icon){return/*#__PURE__*/_jsx(StyledIcon,_objectSpread(_objectSpread({},icon),{},{displayFocus:displayFocus,onMouseDown:onMouseDown,onDoubleClick:onDoubleClick,measure:measure}),icon.id);})});}function Icon(_ref2){var title=_ref2.title,onMouseDown=_ref2.onMouseDown,onDoubleClick=_ref2.onDoubleClick,icon=_ref2.icon,className=_ref2.className,id=_ref2.id,component=_ref2.component,measure=_ref2.measure;var ref=useRef(null);function _onMouseDown(){onMouseDown(id);}function _onDoubleClick(){onDoubleClick(component);}useEffect(function(){var target=ref.current;if(!target)return;var _ref$current$getBound=ref.current.getBoundingClientRect(),left=_ref$current$getBound.left,top=_ref$current$getBound.top,width=_ref$current$getBound.width,height=_ref$current$getBound.height;var posX=left+window.scrollX;var posY=top+window.scrollY;measure({id:id,x:posX,y:posY,w:width,h:height});},[id,measure]);return/*#__PURE__*/_jsxs(\"div\",{className:className,onMouseDown:_onMouseDown,onDoubleClick:_onDoubleClick,ref:ref,children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(className,\"__img__container\"),children:/*#__PURE__*/_jsx(\"img\",{src:icon,alt:title,className:\"\".concat(className,\"__img\")})}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(className,\"__text__container\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(className,\"__text\"),children:title})})]});}var IconsContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  margin-top: 40px;\\n  margin-left: 40px;\\n\"])));var StyledIcon=styled(Icon)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 70px;\\n  margin-bottom: 30px;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  &__text__container {\\n    width: 100%;\\n    font-size: 10px;\\n    color: white;\\n    text-shadow: 0 1px 1px black;\\n    margin-top: 5px;\\n    display: flex;\\n    justify-content: center;\\n\\n    &:before {\\n      content: '';\\n      display: block;\\n      flex-grow: 1;\\n    }\\n    &:after {\\n      content: '';\\n      display: block;\\n      flex-grow: 1;\\n    }\\n  }\\n  &__text {\\n    padding: 0 3px 2px;\\n    background-color: \",\";\\n    text-align: center;\\n    flex-shrink: 1;\\n  }\\n  &__img__container {\\n    width: 30px;\\n    height: 30px;\\n    filter: \",\";\\n  }\\n  &__img {\\n    width: 30px;\\n    height: 30px;\\n    opacity: \",\";\\n  }\\n\"])),function(_ref3){var isFocus=_ref3.isFocus,displayFocus=_ref3.displayFocus;return isFocus&&displayFocus?'#0b61ff':'transparent';},function(_ref4){var isFocus=_ref4.isFocus,displayFocus=_ref4.displayFocus;return isFocus&&displayFocus?'drop-shadow(0 0 blue)':'';},function(_ref5){var isFocus=_ref5.isFocus,displayFocus=_ref5.displayFocus;return isFocus&&displayFocus?0.5:1;});export default Icons;","map":{"version":3,"names":["React","useState","useRef","useEffect","styled","Icons","icons","onMouseDown","onDoubleClick","displayFocus","mouse","selecting","setSelectedIcons","iconsRect","setIconsRect","measure","rect","find","r","id","sx","Math","min","x","docX","sy","y","docY","sw","abs","sh","selectedIds","filter","w","h","map","icon","Icon","title","className","component","ref","_onMouseDown","_onDoubleClick","target","current","getBoundingClientRect","left","top","width","height","posX","window","scrollX","posY","scrollY","IconsContainer","div","StyledIcon","isFocus"],"sources":["/Users/utils/misc/alexnicita.github.io/src/WinXP/Icons/index.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\n\nfunction Icons({\n  icons,\n  onMouseDown,\n  onDoubleClick,\n  displayFocus,\n  mouse,\n  selecting,\n  setSelectedIcons,\n}) {\n  const [iconsRect, setIconsRect] = useState([]);\n  function measure(rect) {\n    if (iconsRect.find(r => r.id === rect.id)) return;\n    setIconsRect(iconsRect => [...iconsRect, rect]);\n  }\n  useEffect(() => {\n    if (!selecting) return;\n    const sx = Math.min(selecting.x, mouse.docX);\n    const sy = Math.min(selecting.y, mouse.docY);\n    const sw = Math.abs(selecting.x - mouse.docX);\n    const sh = Math.abs(selecting.y - mouse.docY);\n    const selectedIds = iconsRect\n      .filter(rect => {\n        const { x, y, w, h } = rect;\n        return x - sx < sw && sx - x < w && y - sy < sh && sy - y < h;\n      })\n      .map(icon => icon.id);\n    setSelectedIcons(selectedIds);\n  }, [iconsRect, setSelectedIcons, selecting, mouse.docX, mouse.docY]);\n  return (\n    <IconsContainer>\n      {icons.map(icon => (\n        <StyledIcon\n          key={icon.id}\n          {...icon}\n          displayFocus={displayFocus}\n          onMouseDown={onMouseDown}\n          onDoubleClick={onDoubleClick}\n          measure={measure}\n        />\n      ))}\n    </IconsContainer>\n  );\n}\n\nfunction Icon({\n  title,\n  onMouseDown,\n  onDoubleClick,\n  icon,\n  className,\n  id,\n  component,\n  measure,\n}) {\n  const ref = useRef(null);\n  function _onMouseDown() {\n    onMouseDown(id);\n  }\n  function _onDoubleClick() {\n    onDoubleClick(component);\n  }\n  useEffect(() => {\n    const target = ref.current;\n    if (!target) return;\n    const { left, top, width, height } = ref.current.getBoundingClientRect();\n    const posX = left + window.scrollX;\n    const posY = top + window.scrollY;\n    measure({ id, x: posX, y: posY, w: width, h: height });\n  }, [id, measure]);\n  return (\n    <div\n      className={className}\n      onMouseDown={_onMouseDown}\n      onDoubleClick={_onDoubleClick}\n      ref={ref}\n    >\n      <div className={`${className}__img__container`}>\n        <img src={icon} alt={title} className={`${className}__img`} />\n      </div>\n      <div className={`${className}__text__container`}>\n        <div className={`${className}__text`}>{title}</div>\n      </div>\n    </div>\n  );\n}\n\nconst IconsContainer = styled.div`\n  position: absolute;\n  margin-top: 40px;\n  margin-left: 40px;\n`;\n\nconst StyledIcon = styled(Icon)`\n  width: 70px;\n  margin-bottom: 30px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  &__text__container {\n    width: 100%;\n    font-size: 10px;\n    color: white;\n    text-shadow: 0 1px 1px black;\n    margin-top: 5px;\n    display: flex;\n    justify-content: center;\n\n    &:before {\n      content: '';\n      display: block;\n      flex-grow: 1;\n    }\n    &:after {\n      content: '';\n      display: block;\n      flex-grow: 1;\n    }\n  }\n  &__text {\n    padding: 0 3px 2px;\n    background-color: ${({ isFocus, displayFocus }) =>\n      isFocus && displayFocus ? '#0b61ff' : 'transparent'};\n    text-align: center;\n    flex-shrink: 1;\n  }\n  &__img__container {\n    width: 30px;\n    height: 30px;\n    filter: ${({ isFocus, displayFocus }) =>\n      isFocus && displayFocus ? 'drop-shadow(0 0 blue)' : ''};\n  }\n  &__img {\n    width: 30px;\n    height: 30px;\n    opacity: ${({ isFocus, displayFocus }) =>\n      isFocus && displayFocus ? 0.5 : 1};\n  }\n`;\n\nexport default Icons;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}